<html layout:decorate="~{layout}">
<div layout:fragment="content" class="main-contents">
  <!-- 고정 좌측 메뉴 -->
  <div th:replace="~{index_left_side :: leftSideFragment }"></div>
  <div class="center">
    <!-- 내 카페 -->
    <div class="my-cafe-box" sec:authorize="isAuthenticated()">
      <div class="title"><span class="f-size-18 f-weight-6">내 카페</span></div>
      <div class="category">
        <div class="ctgr-box-in btn" id="cafe-in"><span>가입한 카페</span></div>
        <div class="ctgr-box-my btn" id="cafe-my"><span>내가 만든 카페</span></div>
      </div>
      <div class="cafe-list" id="cafe-in-list">
        <a th:each="cafe : ${cafeList}" th:href="@{|/cafe/${cafe.id}|}" class="cafe-box-1">
          <div class="profile-img img-box">
            <img th:src="@{|/file/${cafe.profileImg != null ? cafe.profileImg : 'cafe/user_basic.png'}|}" alt="카페 프로필 사진">
          </div>
          <div class="content">
            <div class="title"><span class="f-size-16 f-weight-6" th:text="${cafe.name}">카페이름1</span></div>
            <div class="intro"><span class="f-size-14 f-weight-5" th:text="${cafe.intro}">카페 소개글</span></div>
          </div>
        </a>
      </div>
      <div class="cafe-list d-none" id="cafe-my-list">
        <a th:each="cafe : ${myCafeList}" th:href="@{|/cafe/${cafe.id}|}" class="cafe-box-1">
          <div class="profile-img img-box">
            <img th:src="@{|/file/${cafe.profileImg != null ? cafe.profileImg : 'cafe/user_basic.png'}|}" alt="카페 프로필 사진">
          </div>
          <div class="content">
            <div class="title"><span class="f-size-16 f-weight-6" th:text="${cafe.name}">카페이름1</span></div>
            <div class="intro"><span class="f-size-14 f-weight-5" th:text="${cafe.intro}">카페 소개글</span></div>
          </div>
        </a>
      </div>
    </div>

    <div sec:authorize="!isAuthenticated()">
      <div class="hot-box">
        <div class="title"><span class="f-size-18 f-weight-6">Info Share</span></div>
        <div class="intro-text">
          <p> 지식과 정보를 나누는 소통의 플랫폼입니다. </p>
          <p> 다양한 주제의 카페에서 사람들과 함께 이야기하며, 유용한 정보를 서로 공유해 보세요.</p>
          <p> 여러분의 경험과 아이디어는 누군가에게 큰 도움이 될 수 있습니다.</p>
          <p>함께 성장하고, 나누고, 배우는 여정에 여러분을 초대합니다. 인포쉐어와 함께 더 나은 세상을 만들어 가요!</p>
        </div>
      </div>
    </div>

    <!-- 검색 결과 -->
    <div class="search-results">
      <div class="title"><span class="f-size-18 f-weight-6">검색 결과</span></div>
      <div th:if="${error}">
        <p th:text="${error}" class="error-message"></p>
      </div>
      <div th:if="${cafes}">
        <div th:each="cafe : ${cafes}">
          <a th:href="@{|/cafe/${cafe.id}|}" class="cafe-box-1">
            <div class="profile-img img-box">
              <img th:src="@{|/file/${cafe.profileImg != null ? cafe.profileImg : 'cafe/user_basic.png'}|}" alt="카페 프로필 이미지" class="profile-img" />
            </div>
            <div class="content">
              <div class="title"><span class="f-size-16 f-weight-6" th:text="${cafe.name}">카페이름</span></div>
              <div class="intro"><span class="f-size-14 f-weight-5" th:text="${cafe.intro}">카페 소개글</span></div>
            </div>
          </a>
        </div>
      </div>
      <div th:if="${#lists.isEmpty(cafes)}">
        <p>검색 결과가 없습니다.</p>
      </div>
    </div>


  </div>
  <div class="right-side"></div>
</div>
<!-- 스와이퍼 js -->
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
<!-- 자바 스크립트 -->
<script layout:fragment="script" type='text/javascript'>
  $(document).ready(function() {
   $("#cafe-in").click(() => {
     $("#cafe-in-list").addClass("d-block");
     $("#cafe-in-list").removeClass("d-none");
     $("#cafe-my-list").addClass("d-none");
     $("#cafe-my-list").removeClass("d-block");
   })

   $("#cafe-my").click(() => {
     $("#cafe-my-list").addClass("d-block");
     $("#cafe-my-list").removeClass("d-none");
     $("#cafe-in-list").addClass("d-none");
     $("#cafe-in-list").removeClass("d-block");
   })
  })
</script>
</html>
